{"ast":null,"code":"import _regeneratorRuntime from\"/Users/constanzarepezza/Winterhack23/starbucks/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/constanzarepezza/Winterhack23/starbucks/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/constanzarepezza/Winterhack23/starbucks/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/constanzarepezza/Winterhack23/starbucks/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useEffect,useReducer}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ProductsContext=/*#__PURE__*/createContext();//const API = \"/json/cafe.json\"\n//const CAFE_HELADO = \"/data/cafes-helado.json\"\nvar API_MENU=\"/data/menu.json\";var initialState={products:[],menu:[],loading:true,error:null};var reducer=function reducer(state,action){switch(action.type){case\"LOADING\":return _objectSpread(_objectSpread({},state),{},{loading:true});case\"SET_MENU\":return _objectSpread(_objectSpread({},state),{},{menu:action.payload,loading:false});case\"SET_PRODUCTS\":return _objectSpread(_objectSpread({},state),{},{products:action.payload,loading:false});}};// eslint-disable-next-line react/prop-types\nexport var ProductsProvider=function ProductsProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var fetchProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(category){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/data/\".concat(category,\".json\"));case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;dispatch({type:\"SET_PRODUCTS\",payload:data.products});case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchProducts(_x){return _ref2.apply(this,arguments);};}();var fetchCategories=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(API_MENU);case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;dispatch({type:\"SET_MENU\",payload:data.pageProps.categories});case 7:case\"end\":return _context2.stop();}},_callee2);}));return function fetchCategories(){return _ref3.apply(this,arguments);};}();useEffect(function(){//fetchProducts()\nfetchCategories();},[]);return/*#__PURE__*/_jsx(ProductsContext.Provider,{value:{products:state.products,menu:state.menu,categories:state.categories,loading:state.loading,error:state.error,fetchProducts:fetchProducts},children:children});};","map":{"version":3,"names":["createContext","useEffect","useReducer","jsx","_jsx","ProductsContext","API_MENU","initialState","products","menu","loading","error","reducer","state","action","type","_objectSpread","payload","ProductsProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","dispatch","fetchProducts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","category","res","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","json","stop","_x","apply","arguments","fetchCategories","_ref3","_callee2","_callee2$","_context2","pageProps","categories","Provider","value"],"sources":["/Users/constanzarepezza/Winterhack23/starbucks/src/context/Context.jsx"],"sourcesContent":["import { createContext, useEffect, useReducer } from \"react\"\n\nexport const ProductsContext = createContext()\n\n//const API = \"/json/cafe.json\"\n//const CAFE_HELADO = \"/data/cafes-helado.json\"\nconst API_MENU = \"/data/menu.json\"\n\nconst initialState = {\n    products: [],\n    menu: [],\n    loading: true,\n    error: null\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case \"LOADING\":\n        return {\n            ...state,\n            loading: true\n        }\n        case \"SET_MENU\":\n        return {\n            ...state,\n            menu: action.payload,\n            loading: false\n        }\n        case \"SET_PRODUCTS\":\n        return {\n            ...state,\n            products: action.payload,\n            loading: false\n        }\n    }\n}\n\n// eslint-disable-next-line react/prop-types\nexport const ProductsProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, initialState)\n\n    const fetchProducts = async (category) => {\n        const res = await fetch(`/data/${category}.json`)\n        const data = await res.json()\n        dispatch({ type: \"SET_PRODUCTS\", payload: data.products })\n    }\n    const fetchCategories = async () => {\n        const res = await fetch(API_MENU)\n        const data = await res.json()\n        dispatch({ type: \"SET_MENU\", payload: data.pageProps.categories })\n    }\n\n    useEffect(() => {\n        //fetchProducts()\n        fetchCategories()\n    }, [])\n\n    return (\n        <ProductsContext.Provider\n        value={{ products: state.products, menu: state.menu, categories: state.categories, loading: state.loading, error: state.error, fetchProducts }}\n        >\n        {children}\n        </ProductsContext.Provider>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}